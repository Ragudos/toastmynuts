(()=>{var m="__toastmynuts__",y="__toastmynuts__wrapper",C="__toastmynuts__toast",w="__toastmynuts__message",L="__toastmynuts__close-btn",T={x:"middle",y:"top"},E=3;function v(){return Math.random().toString(16).slice(2)}var g=class e{static _instance;_toasts;static _config;static _toastContainerMouseEnterListener;static _toastContainerMouseLeaveListener;static _toastContainerKeyDownListener;static _toastContainerKeyUpListener;static _mouseLeaveEnterListenerDebouncer;constructor(){this._toasts=[]}static getInstance(o){return e._instance||(e._instance=new e,e._config=o),e._instance}async addToast(o,s="neutral"){let t=this._getOrCreateToastContainer(),i=v(),[a,u]=this._createCloseBtn(i),n=this._createToastElement(i,s),d=document.createElement("div"),l=this._createMessageElement(o),r=setTimeout(()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(i)}catch{}else this.removeToast(i)},1e4);d.appendChild(l),d.appendChild(a),n.appendChild(d),t.prepend(n);let c=n.style.height;n.style.height="auto";let _=n.getBoundingClientRect().height,p=`${_}px`;return n.style.height=c,t.style.setProperty("--_front-toast-height",p),n.style.setProperty("--_initial-height",p),n.removeAttribute("data-toast-state"),this._moveToastsDown(_),this._toasts.push({_message:o,_type:s,_controllers:[u],_timeout:r,_duration:1e4,_id:i}),i}removeToast(o){let s,t;for(let n=0;n<this._toasts.length;++n)this._toasts[n]._id===o&&(s=this._toasts[n],t=n);if(!s||t===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" virtually");let i=document.getElementById(s._id);if(!i)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" in the DOM");if(i.getAttribute("data-toast-state")==="closing")return;for(;s._controllers.length!==0;)s._controllers.pop()?.abort();let u=parseFloat(getComputedStyle(i).transitionDuration);this._moveToastsUp(t),i.setAttribute("data-toast-state","closing"),setTimeout(()=>{let n,d;for(let r=0;r<this._toasts.length;++r)this._toasts[r]._id===o&&(n=this._toasts[r],d=r);if(!n||d===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" virtually");let l=document.getElementById(n._id);if(!l)throw new Error("[ToastMyNuts] Could not find toast with ID "+n._id+" in the DOM");if(n._timeout!==void 0&&clearTimeout(n._timeout),l.remove(),this._toasts.splice(d,1),this._toasts.length===0){let r=document.getElementById(y),c=document.getElementById(m);e._toastContainerMouseEnterListener&&c?.removeEventListener("pointerenter",e._toastContainerMouseEnterListener),e._toastContainerMouseLeaveListener&&c?.removeEventListener("pointerleave",e._toastContainerMouseLeaveListener),e._toastContainerKeyDownListener&&window.removeEventListener("keydown",e._toastContainerKeyDownListener),e._toastContainerKeyUpListener&&window.removeEventListener("keyup",e._toastContainerKeyUpListener),r?.remove()}for(let r=d;r<this._toasts.length;++r){let c=this._toasts[r],_=document.getElementById(c._id);if(!_)throw new Error("[ToastMyNuts] Could not find toast with ID "+c._id+" in the DOM");_.style.setProperty("--_z-idx",r.toString())}},u*1e3)}_removeTimeoutOfToasts(){for(let o=0;o<this._toasts.length;++o){let s=this._toasts[o];s._timeout&&(clearTimeout(s._timeout),this._toasts[o]._timeout=void 0)}}_moveToastsUp(o){let s=e._config?.maxVisibleToasts??E;for(let t=0;t<o;++t){let i=this._toasts[t];if(!i)throw new Error("[ToastMyNuts] Could not find toast with index "+t+" virtually");let a=document.getElementById(i._id);if(!a)throw new Error("[ToastMyNuts] Could not find toast with ID "+i._id+" in the DOM");let u=0;for(let n=t+1;n<this._toasts.length;++n){if(n===o)continue;let d=this._toasts[n],l=document.getElementById(d._id);if(!l)throw new Error("[ToastMyNuts] Could not find toast with ID "+d._id+" in the DOM");let r=parseFloat(l.style.getPropertyValue("--_initial-height"));u+=r}a.style.setProperty("--_height-offset",`${u}px`),a.style.setProperty("--_idx",(this._toasts.length-t-2).toString()),t===this._toasts.length-2&&a.setAttribute("data-front-toast","true"),this._toasts.length-t<=s+1&&a.getAttribute("data-toast-state")==="hidden"&&(a.removeAttribute("data-toast-state"),a.removeAttribute("aria-hidden"))}}_moveToastsDown(o){let s=e._config?.maxVisibleToasts??E;for(let t=0;t<this._toasts.length;++t){let i=this._toasts[t],a=document.getElementById(i._id);if(!a)throw new Error("[ToastMyNuts] Could not find toast with ID "+i._id);let u=o;for(let n=t+1;n<this._toasts.length;++n){let d=this._toasts[n],l=document.getElementById(d._id);if(!l)throw new Error("[ToastMyNuts] Could not find toast with ID "+d._id);let r=parseFloat(l.style.getPropertyValue("--_initial-height"));u+=r}a.style.setProperty("--_height-offset",`${u}px`),a.style.setProperty("--_idx",(this._toasts.length-t).toString()),a.removeAttribute("data-front-toast"),this._toasts.length-t>=s&&a.getAttribute("data-toast-state")!=="closing"&&(a.setAttribute("data-toast-state","hidden"),a.setAttribute("aria-hidden","true"))}}_getOrCreateToastContainer(){let o=document.getElementById(m);if(!o){let s=document.createElement("div");s.id=y,s.setAttribute("aria-label","Notifications (Alt + T)");let t=document.createElement("ol");return t.id=m,t.setAttribute("data-position-x",e._config?.position?.x||T.x),t.setAttribute("data-position-y",e._config?.position?.y||T.y),t.setAttribute("data-expanded","false"),e._config?.stackable===!1&&(e._toastContainerMouseEnterListener=()=>{t.getAttribute("data-did-toggle-expansion")!=="true"&&(e._mouseLeaveEnterListenerDebouncer&&clearTimeout(e._mouseLeaveEnterListenerDebouncer),t.setAttribute("data-expanded","true"))},e._toastContainerMouseLeaveListener=()=>{e._mouseLeaveEnterListenerDebouncer=setTimeout(()=>{t.getAttribute("data-did-toggle-expansion")!=="true"&&t.setAttribute("data-expanded","false")},50)},e._toastContainerKeyDownListener=i=>{if(i.altKey&&i.code==="KeyT"){if(t.getAttribute("data-did-toggle-expansion")==="true")return;e._mouseLeaveEnterListenerDebouncer&&clearTimeout(e._mouseLeaveEnterListenerDebouncer),t.setAttribute("data-expanded",t.getAttribute("data-expanded")==="true"?"false":"true"),t.setAttribute("data-did-toggle-expansion","true")}},e._toastContainerKeyUpListener=i=>{i.code==="KeyT"&&t.setAttribute("data-did-toggle-expansion","false")},t.addEventListener("pointerenter",e._toastContainerMouseEnterListener),t.addEventListener("pointerleave",e._toastContainerMouseLeaveListener),window.addEventListener("keydown",e._toastContainerKeyDownListener),window.addEventListener("keyup",e._toastContainerKeyUpListener)),s.appendChild(t),document.body.appendChild(s),t}if(!(o instanceof HTMLOListElement))throw new Error("[ToastMyNuts] Colliding ID "+m+".");return o}_createMessageElement(o){let s=document.createElement("div");return s.textContent=o,s.classList.add(w),s}_createToastElement(o,s){let t=document.createElement("li");return t.id=o,t.classList.add(C),t.style.setProperty("--_idx","0"),t.style.setProperty("--_z-idx",this._toasts.length.toString()),t.setAttribute("data-toast-type",s),t.setAttribute("data-toast-state","entering"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("data-front-toast","true"),t}_createCloseBtn(o){let s=new AbortController,t=document.createElement("button");return t.type="button",t.setAttribute("aria-label","Close notification"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /></svg>',t.classList.add(L),t.addEventListener("click",()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(o)}catch{}else this.removeToast(o)},{signal:s.signal}),[t,s]}};function A(){let e=document.querySelector("meta[name='toastmynuts:config']");if(!e)return;let o=e.getAttribute("content");if(o)return JSON.parse(o)}var h=A(),f=g.getInstance(h);function b(e,o){if(h&&h.ignoreErrors)try{f.addToast(e,o)}catch(s){console.error(s)}else f.addToast(e,o)}function x(e){if(h&&h.ignoreErrors)try{f.removeToast(e)}catch{}else f.removeToast(e)}window.ToastMyNuts=Object.freeze({create:b,remove:x});})();
//# sourceMappingURL=index.umd.js.map
