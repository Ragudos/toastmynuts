"use strict";(()=>{var p="__toastmynuts__",D="__toastmynuts__wrapper",H="__toastmynuts__toast",I="__toastmynuts__message",R="__toastmynuts__close-btn",C="data-toast-type",O={x:"middle",y:"top"},P=3,x={neutral:"",promise:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="24" height="24" style="shape-rendering: auto; display: block; background: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink"><g><circle cx="50" cy="50" fill="none" stroke="currentColor" stroke-width="8" r="35" stroke-dasharray="164.93361431346415 56.97787143782138"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle><g></g></g><!-- [ldio] generated by https://loading.io --></svg>',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" /></svg>',error:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" /></svg>',success:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" /></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z" clip-rule="evenodd" /></svg>'};function V(){return Math.random().toString(16).slice(2)}function Z(){let n=document.documentElement.getAttribute("dir");return n!=="rtl"&&n!=="ltr"?window.getComputedStyle(document.documentElement).direction:n}var A=class n{static _instance;static _toastDuration;static _config;static _defaultDir;_toasts;_toastToBeRemoved;_toastContainerAbortControllers;constructor(){this._toasts=[],this._toastToBeRemoved=[],this._toastContainerAbortControllers=[]}static getInstance(e){if(!n._instance){if(n._instance=new n,n._config=e,n._toastDuration=e?.toastDuration??1e4,n._config?.dir||(n._defaultDir=Z()),e?.maxVisibleToasts!==void 0&&e.maxVisibleToasts<1)throw new Error("[ToastMyNuts] maxVisibleToasts must be a positive number");if(e?.toastDuration!==void 0&&e.toastDuration<100)throw new Error("[ToastMyNuts] toastDuration must be at least 100 milliseconds")}return n._instance}setPosition({x:e,y:s}){let t=document.getElementById(p);t&&(t.setAttribute("data-position-x",e),t.setAttribute("data-position-y",s)),n._config?n._config.position={x:e,y:s}:n._config={position:{x:e,y:s}}}setIsStackable(e){n._config?n._config.stackable=e:n._config={stackable:e}}addPromiseToast(e,s,t,o,r){let i=this.addToast(e,"promise",r);return new Promise((a,l)=>{let d=!1,g,m;(typeof o=="function"?o():o).then(u=>{d=!0,g=u,a([i,u])}).catch(u=>{d=!1,m=u,l([i,u])}).finally(()=>{let u,b;for(let v=0;v<this._toasts.length;++v)this._toasts[v]._id===i&&(u=this._toasts[v],b=v);if(!u)throw new Error("[ToastMyNuts] Could not find toast with ID "+i+" virtually");let _=document.getElementById(p);if(!_)throw new Error("[ToastMyNuts] Could not find toast container with ID "+p);let c=document.getElementById(i);if(!c)throw new Error("[ToastMyNuts] Could not find toast with ID "+i+" in the DOM");let T=c.querySelector("div");if(!T)throw new Error("[ToastMyNuts] Could not find toast relative container");let w=T.querySelector("."+I);if(!w)throw new Error("[ToastMyNuts] Could not find toast message container");let f,y=c.querySelector(".__toastmynuts__icon");y?(y.innerHTML="",f=y):(f=document.createElement("div"),f.classList.add("__toastmynuts__icon")),d?(u._type="success",c.setAttribute(C,"success"),w.textContent=typeof s=="function"?s(g):s,f.innerHTML=x.success):(u._type="error",c.setAttribute(C,"error"),w.textContent=typeof t=="function"?t(m):t,f.innerHTML=x.error);let[B,L]=this._createCloseBtn(u._id),E=r?.closeOnSwipe||n._config?.closeOnSwipe;u._controllers.push(L),(E===!0||E===void 0)&&u._controllers.push(this._attachSwipeListenersToToast(c)),_.getAttribute("data-expanded")==="true"||(u._timeout=setTimeout(()=>{this.removeToast(i)},n._toastDuration)),T.prepend(f),T.appendChild(B);let N=_.style.getPropertyValue("--_front-toast-height");c.style.removeProperty("--_initial-height"),_.style.removeProperty("--_front-toast-height");let k=c.style.height;c.style.height="auto";let S=c.getBoundingClientRect().height,M=`${S}px`;c.style.height=k,c.getAttribute("data-front-toast")==="true"?_.style.setProperty("--_front-toast-height",M):_.style.setProperty("--_front-toast-height",N),c.style.setProperty("--_initial-height",M),this._moveToastsDown(S,!0)})})}addToast(e,s="neutral",t){let[o,r]=this._getOrCreateToastContainer(),i=V(),[a,l]=this._createToastElement(i,s,t),d=document.createElement("div"),g=this._createMessageElement(e),m=[l],u,b;if(s!=="promise"){b=setTimeout(()=>{this.removeToast(i)},n._toastDuration);let[f,y]=this._createCloseBtn(i);u=f,m.push(y)}if(s!=="neutral"){let f=document.createElement("div");f.innerHTML=x[s],f.classList.add("__toastmynuts__icon"),d.appendChild(f)}d.appendChild(g),u&&d.appendChild(u),a.appendChild(d),o.prepend(a);let _=a.style.height;a.style.height="auto";let c=a.getBoundingClientRect().height,T=`${c}px`;a.style.height=_,o.style.setProperty("--_front-toast-height",T),a.style.setProperty("--_initial-height",T),a.removeAttribute("data-toast-state"),this._moveToastsDown(c);let w=Date.now();return this._toasts.push({_message:e,_type:s,_controllers:m,_timeout:b,_duration:n._toastDuration,_id:i,_created_on:w,_timeout_created_on:t?.closeOnSwipe?w:void 0}),i}removeToast(e){let s,t;for(let l=0;l<this._toasts.length;++l)this._toasts[l]._id===e&&(s=this._toasts[l],t=l);if(!s||t===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+e+" virtually");if(s._type==="promise")return;let o=document.getElementById(s._id);if(!o)throw new Error("[ToastMyNuts] Could not find toast with ID "+e+" in the DOM");if(o.getAttribute("data-toast-state")==="closing")return;for(;s._controllers.length!==0;)s._controllers.pop()?.abort();let i=o.getAttribute("data-toast-state")==="hidden";if(s._timeout!==void 0&&clearTimeout(s._timeout),i){this._removeToastPermanently(e,!0),this._toasts.splice(t,1),this._changeToastsZindex(t);return}o.setAttribute("data-toast-state","closing");let a=parseFloat(getComputedStyle(o).transitionDuration);this._moveToastsUp(t),this._toastToBeRemoved.push(s),this._toasts.splice(t,1),this._changeToastsZindex(t),setTimeout(()=>{this._removeToastPermanently(e,!1)},a*1e3)}_removeToastPermanently(e,s){let t,o;if(s)for(let i=0;i<this._toasts.length;++i)this._toasts[i]._id===e&&(t=this._toasts[i],o=i);else for(let i=0;i<this._toastToBeRemoved.length;++i)this._toastToBeRemoved[i]._id===e&&(t=this._toastToBeRemoved[i],o=i);if(!t)throw new Error("[ToastMyNuts] Could not find toast with ID "+e+" virtually");if(document.getElementById(t._id)?.remove(),!s&&o!==void 0&&this._toastToBeRemoved.splice(o,1),this._toasts.length===0){let i=document.getElementById(D);for(;this._toastContainerAbortControllers.length!==0;)this._toastContainerAbortControllers.pop()?.abort();i?.remove()}}_removeTimeoutOfToasts(){let e=Date.now();for(let s=0;s<this._toasts.length;++s){let t=this._toasts[s];if(t._timeout){let o=t._timeout_created_on!==void 0?t._duration-(e-t._timeout_created_on):t._duration;if(o<=0)continue;clearTimeout(t._timeout),t._duration=o,t._timeout=void 0}}}_addTimeoutToToasts(){let e=Date.now();for(let s=0;s<this._toasts.length;++s){let t=this._toasts[s];t._type!=="promise"&&(t._timeout||(t._timeout_created_on=e,t._timeout=setTimeout(()=>{this.removeToast(t._id)},t._duration)))}}_changeToastsZindex(e){for(let s=e;s<this._toasts.length;++s){let t=this._toasts[s];if(!t)continue;let o=document.getElementById(t._id);if(!o)throw new Error("[ToastMyNuts] Could not find toast with ID "+t._id+" in the DOM");o.style.setProperty("--_z-idx",s.toString())}}_moveToastsUp(e){let s=n._config?.maxVisibleToasts??P;for(let t=0;t<e;++t){let o=this._toasts[t];if(!o)throw new Error("[ToastMyNuts] Could not find toast with index "+t+" virtually");let r=document.getElementById(o._id);if(!r)throw new Error("[ToastMyNuts] Could not find toast with ID "+o._id+" in the DOM");let i=0;for(let l=t+1;l<this._toasts.length;++l){if(l===e)continue;let d=this._toasts[l],g=document.getElementById(d._id);if(!g)throw new Error("[ToastMyNuts] Could not find toast with ID "+d._id+" in the DOM");let m=parseFloat(g.style.getPropertyValue("--_initial-height"));i+=m}r.style.setProperty("--_height-offset",`${i}px`);let a=this._toasts.length-2;if(r.style.setProperty("--_idx",(a-t).toString()),t===a){let l=document.getElementById(p);if(!l)throw new Error("[ToastMyNuts] Could not find toast container with ID "+p);let d=r.style.getPropertyValue("--_initial-height");l.style.setProperty("--_front-toast-height",d),r.setAttribute("data-front-toast","true")}this._toasts.length-t<=s+1&&r.getAttribute("data-toast-state")==="hidden"&&(r.removeAttribute("data-toast-state"),r.removeAttribute("aria-hidden"))}}_moveToastsDown(e,s){let t=n._config?.maxVisibleToasts??P;for(let o=0;o<this._toasts.length;++o){let r=this._toasts[o],i=document.getElementById(r._id);if(!i)throw new Error("[ToastMyNuts] Could not find toast with ID "+r._id);let a=s?0:e;for(let l=o+1;l<this._toasts.length;++l){let d=this._toasts[l],g=document.getElementById(d._id);if(!g)throw new Error("[ToastMyNuts] Could not find toast with ID "+d._id);let m=parseFloat(g.style.getPropertyValue("--_initial-height"));a+=m}i.style.setProperty("--_height-offset",`${a}px`),s||(i.style.setProperty("--_idx",(this._toasts.length-o).toString()),i.removeAttribute("data-front-toast"),this._toasts.length-o>=t&&i.getAttribute("data-toast-state")!=="closing"&&(i.setAttribute("data-toast-state","hidden"),i.setAttribute("aria-hidden","true")))}}_getOrCreateToastContainer(){let e=document.getElementById(p);if(!e){let s=document.createElement("div"),t=new AbortController;s.id=D,s.setAttribute("aria-label","Notifications (Alt + T)"),s.setAttribute("tabindex","-1");let o=document.createElement("ol");o.id=p;let r=n._config?.stackable===!0||n._config?.stackable===void 0;return o.setAttribute("data-position-x",n._config?.position?.x||O.x),o.setAttribute("data-position-y",n._config?.position?.y||O.y),o.setAttribute("data-stackable",r?"true":"false"),o.setAttribute("data-expanded",r?"false":"true"),(n._config?.theme==="dark"||n._config?.theme==="light")&&o.setAttribute("data-theme",n._config.theme),o.addEventListener("pointerenter",()=>{if(r){if(o.getAttribute("data-did-toggle-expansion")==="true")return;o.setAttribute("data-expanded","true"),o.removeAttribute("data-should-stack")}this._removeTimeoutOfToasts()},{passive:!0,signal:t.signal}),o.addEventListener("pointerleave",()=>{if(r){if(o.getAttribute("data-did-toggle-expansion")==="true")return;let i=o.children;for(let a=0;a<i.length;++a)if(i[a].getAttribute("data-is-swiping")==="true"){o.setAttribute("data-should-stack","true");return}o.setAttribute("data-expanded","false")}this._addTimeoutToToasts()},{passive:!0,signal:t.signal}),r&&(window.addEventListener("keydown",i=>{if(i.altKey&&i.code==="KeyT"){if(o.getAttribute("data-did-toggle-expansion")==="true")return;let a=o.getAttribute("data-expanded")==="false";o.setAttribute("data-expanded",a?"true":"false"),o.setAttribute("data-did-toggle-expansion","true"),a?this._removeTimeoutOfToasts():this._addTimeoutToToasts()}},{passive:!0,signal:t.signal}),window.addEventListener("keyup",i=>{i.code==="KeyT"&&o.setAttribute("data-did-toggle-expansion","false")},{passive:!0,signal:t.signal})),s.appendChild(o),document.body.appendChild(s),this._toastContainerAbortControllers.push(t),[o,t]}if(!(e instanceof HTMLOListElement))throw new Error("[ToastMyNuts] Colliding ID "+p+".");return[e,void 0]}_createMessageElement(e){let s=document.createElement("div");return s.textContent=e,s.classList.add(I),s}_createToastElement(e,s,t){let o=document.createElement("li");o.id=e,o.classList.add(H),o.style.setProperty("--_idx","0"),o.style.setProperty("--_z-idx",this._toasts.length.toString()),o.setAttribute(C,s),o.setAttribute("data-toast-state","entering"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),o.setAttribute("data-front-toast","true"),o.setAttribute("dir",t?.dir||n._config?.dir||n._defaultDir),t?.theme&&o.setAttribute("data-theme",t.theme),(t?.richColors===!0||n._config?.richColors)&&o.setAttribute("data-rich-colors","true");let r=t?.closeOnSwipe===void 0?n._config?.closeOnSwipe:t.closeOnSwipe,i;return(r===!0||r===void 0)&&s!=="promise"&&(i=this._attachSwipeListenersToToast(o)),[o,i]}_attachSwipeListenersToToast(e){let s=new AbortController;return e.addEventListener("pointerdown",t=>{t.target.setPointerCapture(t.pointerId),e.setAttribute("data-is-swiping","true"),e.setAttribute("data-dragstart-time",Date.now().toString());let o=t.screenY;e.style.setProperty("--_original-position",o.toString())},{signal:s.signal,passive:!0}),window.addEventListener("pointerup",t=>{let o=parseFloat(e.style.getPropertyValue("--_swipe-offset")),r=Math.abs(o),i=parseFloat(e.getAttribute("data-dragstart-time")??"0"),a=Date.now()-i,l=Math.abs(o)/a;e.setAttribute("data-is-swiping","false"),r>=10||l>=.5?(e.setAttribute("data-exit-swipe","true"),this.removeToast(e.id)):(e.style.setProperty("--_swipe-offset","0"),e.style.opacity="",e.style.removeProperty("--_original-position"),e.removeAttribute("data-dragstart-time"));let d=document.getElementById(p);if(!d)throw new Error("[ToastMyNuts] Could not find toast container with ID "+p);d.getAttribute("data-should-stack")==="true"&&(d.setAttribute("data-should-stack","false"),d.setAttribute("data-expanded","false"),this._addTimeoutToToasts())},{signal:s.signal,passive:!0}),window.addEventListener("pointermove",t=>{if(!(e.getAttribute("data-is-swiping")==="true"))return;let r=document.getElementById(p);if(!r)throw new Error("[ToastMyNuts] Could not find toast container with ID "+p);let i=r.getAttribute("data-position-y"),a=i==="top",l=i==="bottom",g=parseFloat(e.style.getPropertyValue("--_original-position"))-t.screenY;if(a&&g<0||l&&g>0)return;if(!a&&!l)throw new Error("[ToastMyNuts] Invalid vertical position "+i);let m=Math.max(1-Math.abs(g)/35,.25).toFixed(2);e.style.opacity=m,e.style.setProperty("--_swipe-offset",g.toString())},{signal:s.signal,passive:!0}),s}_createCloseBtn(e){let s=new AbortController,t=document.createElement("button");return t.type="button",t.setAttribute("aria-label","Close notification"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /></svg>',t.classList.add(R),t.addEventListener("click",()=>{this.removeToast(e)},{signal:s.signal,passive:!0}),[t,s]}};function F(){let n=document.querySelector("meta[name='toastmynuts:config']");if(!n)return;let e=n.getAttribute("content");if(e)return JSON.parse(e)}var U=F(),h=A.getInstance(U);function K(n,e){return h.addToast(n,"neutral",e)}function Y(n,e){return h.addToast(n,"success",e)}function j(n,e){return h.addToast(n,"error",e)}function q(n,e){return h.addToast(n,"warning",e)}function W(n,e){return h.addToast(n,"info",e)}window.ToastMyNuts=Object.freeze(Object.assign(K,{setPosition:h.setPosition.bind(h),setIsStackable:h.setIsStackable.bind(h),remove:h.removeToast.bind(h),success:Y,error:j,warning:q,info:W,promise:h.addPromiseToast.bind(h)}));})();
//# sourceMappingURL=index.umd.js.map
