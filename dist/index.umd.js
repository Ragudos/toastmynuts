(()=>{var m="__toastmynuts__",y="__toastmynuts__wrapper",w="__toastmynuts__toast",C="__toastmynuts__message",L="__toastmynuts__close-btn",E={x:"middle",y:"top"},v=3;function A(){return Math.random().toString(16).slice(2)}var h=class e{static _instance;_toasts;_toastToBeRemoved;static _config;static _toastContainerMouseEnterListener;static _toastContainerMouseLeaveListener;static _toastContainerKeyDownListener;static _toastContainerKeyUpListener;static _mouseLeaveEnterListenerDebouncer;constructor(){this._toasts=[],this._toastToBeRemoved=[]}static getInstance(s){return e._instance||(e._instance=new e,e._config=s),e._instance}async addToast(s,o="neutral"){let t=this._getOrCreateToastContainer(),n=A(),[a,l]=this._createCloseBtn(n),i=this._createToastElement(n,o),r=document.createElement("div"),c=this._createMessageElement(s),d=setTimeout(()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(n)}catch{}else this.removeToast(n)},1e4);r.appendChild(c),r.appendChild(a),i.appendChild(r),t.prepend(i);let _=i.style.height;i.style.height="auto";let f=i.getBoundingClientRect().height,T=`${f}px`;i.style.height=_,t.style.setProperty("--_front-toast-height",T),i.style.setProperty("--_initial-height",T),i.removeAttribute("data-toast-state"),this._moveToastsDown(f);let p=Date.now();return this._toasts.push({_message:s,_type:o,_controllers:[l],_timeout:d,_duration:1e4,_id:n,_created_on:p,_timeout_created_on:p}),n}removeToast(s){let o,t;for(let i=0;i<this._toasts.length;++i)this._toasts[i]._id===s&&(o=this._toasts[i],t=i);if(!o||t===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+s+" virtually");let n=document.getElementById(o._id);if(!n)throw new Error("[ToastMyNuts] Could not find toast with ID "+s+" in the DOM");if(n.getAttribute("data-toast-state")==="closing")return;for(n.setAttribute("data-toast-state","closing");o._controllers.length!==0;)o._controllers.pop()?.abort();let l=parseFloat(getComputedStyle(n).transitionDuration);this._moveToastsUp(t),this._toastToBeRemoved.push(o),o._timeout!==void 0&&clearTimeout(o._timeout),this._toasts.splice(t,1),setTimeout(()=>{let i,r;for(let d=0;d<this._toastToBeRemoved.length;++d)this._toastToBeRemoved[d]._id===s&&(i=this._toastToBeRemoved[d],r=d);if(!i||r===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+s+" virtually");if(document.getElementById(i._id)?.remove(),this._toastToBeRemoved.splice(r,1),this._toasts.length===0){let d=document.getElementById(y),_=document.getElementById(m);e._toastContainerMouseEnterListener&&_?.removeEventListener("pointerenter",e._toastContainerMouseEnterListener),e._toastContainerMouseLeaveListener&&_?.removeEventListener("pointerleave",e._toastContainerMouseLeaveListener),e._toastContainerKeyDownListener&&window.removeEventListener("keydown",e._toastContainerKeyDownListener),e._toastContainerKeyUpListener&&window.removeEventListener("keyup",e._toastContainerKeyUpListener),d?.remove()}},l*1e3)}_removeTimeoutOfToasts(){let s=Date.now();for(let o=0;o<this._toasts.length;++o){let t=this._toasts[o];if(t._timeout){let n=t._duration-(s-t._timeout_created_on);if(n<=0)continue;clearTimeout(t._timeout),t._duration=n,t._timeout=void 0}}}_addTimeoutToToasts(){let s=Date.now();for(let o=0;o<this._toasts.length;++o){let t=this._toasts[o];t._timeout||(t._timeout_created_on=s,t._timeout=setTimeout(()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(t._id)}catch{}else this.removeToast(t._id)},t._duration))}}_moveToastsUp(s){let o=e._config?.maxVisibleToasts??v;for(let t=0;t<s;++t){let n=this._toasts[t];if(!n)throw new Error("[ToastMyNuts] Could not find toast with index "+t+" virtually");let a=document.getElementById(n._id);if(!a)throw new Error("[ToastMyNuts] Could not find toast with ID "+n._id+" in the DOM");let l=0;for(let i=t+1;i<this._toasts.length;++i){if(i===s)continue;let r=this._toasts[i],c=document.getElementById(r._id);if(!c)throw new Error("[ToastMyNuts] Could not find toast with ID "+r._id+" in the DOM");let d=parseFloat(c.style.getPropertyValue("--_initial-height"));l+=d}a.style.setProperty("--_height-offset",`${l}px`),a.style.setProperty("--_idx",(this._toasts.length-t-2).toString()),t===this._toasts.length-2&&a.setAttribute("data-front-toast","true"),this._toasts.length-t<=o+1&&a.getAttribute("data-toast-state")==="hidden"&&(a.removeAttribute("data-toast-state"),a.removeAttribute("aria-hidden"))}for(let t=s+1;t<this._toasts.length;++t){let n=this._toasts[t],a=document.getElementById(n._id);if(!a)throw new Error("[ToastMyNuts] Could not find toast with ID "+n._id+" in the DOM");a.style.setProperty("--_z-idx",(t-1).toString())}}_moveToastsDown(s){let o=e._config?.maxVisibleToasts??v;for(let t=0;t<this._toasts.length;++t){let n=this._toasts[t],a=document.getElementById(n._id);if(!a)throw new Error("[ToastMyNuts] Could not find toast with ID "+n._id);let l=s;for(let i=t+1;i<this._toasts.length;++i){let r=this._toasts[i],c=document.getElementById(r._id);if(!c)throw new Error("[ToastMyNuts] Could not find toast with ID "+r._id);let d=parseFloat(c.style.getPropertyValue("--_initial-height"));l+=d}a.style.setProperty("--_height-offset",`${l}px`),a.style.setProperty("--_idx",(this._toasts.length-t).toString()),a.removeAttribute("data-front-toast"),this._toasts.length-t>=o&&a.getAttribute("data-toast-state")!=="closing"&&(a.setAttribute("data-toast-state","hidden"),a.setAttribute("aria-hidden","true"))}}_getOrCreateToastContainer(){let s=document.getElementById(m);if(!s){let o=document.createElement("div");o.id=y,o.setAttribute("aria-label","Notifications (Alt + T)");let t=document.createElement("ol");return t.id=m,t.setAttribute("data-position-x",e._config?.position?.x||E.x),t.setAttribute("data-position-y",e._config?.position?.y||E.y),t.setAttribute("data-expanded","false"),e._config?.stackable===!1&&(e._toastContainerMouseEnterListener=()=>{t.getAttribute("data-did-toggle-expansion")!=="true"&&(e._mouseLeaveEnterListenerDebouncer&&clearTimeout(e._mouseLeaveEnterListenerDebouncer),t.setAttribute("data-expanded","true"),this._removeTimeoutOfToasts())},e._toastContainerMouseLeaveListener=()=>{e._mouseLeaveEnterListenerDebouncer=setTimeout(()=>{t.getAttribute("data-did-toggle-expansion")!=="true"&&(t.setAttribute("data-expanded","false"),this._addTimeoutToToasts())},50)},e._toastContainerKeyDownListener=n=>{if(n.altKey&&n.code==="KeyT"){if(t.getAttribute("data-did-toggle-expansion")==="true")return;e._mouseLeaveEnterListenerDebouncer&&clearTimeout(e._mouseLeaveEnterListenerDebouncer);let a=t.getAttribute("data-expanded")==="false";t.setAttribute("data-expanded",a?"true":"false"),t.setAttribute("data-did-toggle-expansion","true"),a?this._removeTimeoutOfToasts():this._addTimeoutToToasts()}},e._toastContainerKeyUpListener=n=>{n.code==="KeyT"&&t.setAttribute("data-did-toggle-expansion","false")},t.addEventListener("pointerenter",e._toastContainerMouseEnterListener),t.addEventListener("pointerleave",e._toastContainerMouseLeaveListener),window.addEventListener("keydown",e._toastContainerKeyDownListener),window.addEventListener("keyup",e._toastContainerKeyUpListener)),o.appendChild(t),document.body.appendChild(o),t}if(!(s instanceof HTMLOListElement))throw new Error("[ToastMyNuts] Colliding ID "+m+".");return s}_createMessageElement(s){let o=document.createElement("div");return o.textContent=s,o.classList.add(C),o}_createToastElement(s,o){let t=document.createElement("li");return t.id=s,t.classList.add(w),t.style.setProperty("--_idx","0"),t.style.setProperty("--_z-idx",this._toasts.length.toString()),t.setAttribute("data-toast-type",o),t.setAttribute("data-toast-state","entering"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("data-front-toast","true"),t}_createCloseBtn(s){let o=new AbortController,t=document.createElement("button");return t.type="button",t.setAttribute("aria-label","Close notification"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /></svg>',t.classList.add(L),t.addEventListener("click",()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(s)}catch{}else this.removeToast(s)},{signal:o.signal}),[t,o]}};function b(){let e=document.querySelector("meta[name='toastmynuts:config']");if(!e)return;let s=e.getAttribute("content");if(s)return JSON.parse(s)}var u=b(),g=h.getInstance(u);function x(e,s){if(u&&u.ignoreErrors)try{g.addToast(e,s)}catch(o){console.error(o)}else g.addToast(e,s)}function D(e){if(u&&u.ignoreErrors)try{g.removeToast(e)}catch{}else g.removeToast(e)}window.ToastMyNuts=Object.freeze({create:x,remove:D});})();
//# sourceMappingURL=index.umd.js.map
