(()=>{var g="__toastmynuts__",y="__toastmynuts__wrapper",C="__toastmynuts__toast",w="__toastmynuts__message",A="__toastmynuts__close-btn",T={x:"middle",y:"top"},E=3;function L(){return Math.random().toString(16).slice(2)}var m=class e{static _instance;_toasts;static _config;static _toastContainerMouseEnterListener;static _toastContainerMouseLeaveListener;static _toastContainerKeyDownListener;static _toastContainerKeyUpListener;constructor(){this._toasts=[]}static getInstance(o){return e._instance||(e._instance=new e,e._config=o),e._instance}async addToast(o,n="neutral"){let t=this._getOrCreateToastContainer(),i=L(),[r,c]=this._createCloseBtn(i),s=this._createToastElement(i,n),l=document.createElement("div"),d=this._createMessageElement(o),a=setTimeout(()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(i)}catch{}else this.removeToast(i)},6e4);l.appendChild(d),l.appendChild(r),s.appendChild(l),t.prepend(s);let u=s.style.height;s.style.height="auto";let h=s.getBoundingClientRect().height,p=`${h}px`;return s.style.height=u,t.style.setProperty("--_front-toast-height",p),s.style.setProperty("--_initial-height",p),s.removeAttribute("data-toast-state"),this._moveToastsDown(h),this._toasts.push({_message:o,_type:n,_controllers:[c],_timeout:a,_duration:6e4,_id:i}),i}removeToast(o){let n,t;for(let s=0;s<this._toasts.length;++s)this._toasts[s]._id===o&&(n=this._toasts[s],t=s);if(!n||t===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" virtually");let i=document.getElementById(n._id);if(!i)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" in the DOM");if(i.getAttribute("data-toast-state")==="closing")return;for(i.setAttribute("data-toast-state","closing");n._controllers.length!==0;)n._controllers.pop()?.abort();let c=parseFloat(getComputedStyle(i).transitionDuration);this._moveToastsUp(t),setTimeout(()=>{let s,l;for(let a=0;a<this._toasts.length;++a)this._toasts[a]._id===o&&(s=this._toasts[a],l=a);if(!s||l===void 0)throw new Error("[ToastMyNuts] Could not find toast with ID "+o+" virtually");let d=document.getElementById(s._id);if(!d)throw new Error("[ToastMyNuts] Could not find toast with ID "+s._id+" in the DOM");if(s._timeout&&clearTimeout(s._timeout),d.remove(),this._toasts.splice(l,1),this._toasts.length===0){let a=document.getElementById(y),u=document.getElementById(g);e._toastContainerMouseEnterListener&&u?.removeEventListener("pointerenter",e._toastContainerMouseEnterListener),e._toastContainerMouseLeaveListener&&u?.removeEventListener("pointerleave",e._toastContainerMouseLeaveListener),e._toastContainerKeyDownListener&&window.removeEventListener("keydown",e._toastContainerKeyDownListener),e._toastContainerKeyUpListener&&window.removeEventListener("keyup",e._toastContainerKeyUpListener),a?.remove()}for(let a=l;a<this._toasts.length;++a){let u=this._toasts[a],h=document.getElementById(u._id);if(!h)throw new Error("[ToastMyNuts] Could not find toast with ID "+u._id+" in the DOM");h.style.setProperty("--_z-idx",a.toString())}},c*1e3)}_moveToastsUp(o){let n=e._config?.maxVisibleToasts??E;for(let t=0;t<o;++t){let i=this._toasts[t];if(!i)throw new Error("[ToastMyNuts] Could not find toast with index "+t+" virtually");let r=document.getElementById(i._id);if(!r)throw new Error("[ToastMyNuts] Could not find toast with ID "+i._id+" in the DOM");let c=0;for(let s=t+1;s<this._toasts.length;++s){if(s===o)continue;let l=this._toasts[s],d=document.getElementById(l._id);if(!d)throw new Error("[ToastMyNuts] Could not find toast with ID "+l._id+" in the DOM");let a=parseFloat(d.style.getPropertyValue("--_initial-height"));c+=a}r.style.setProperty("--_height-offset",`${c}px`),r.style.setProperty("--_idx",(this._toasts.length-t-2).toString()),t===this._toasts.length-2&&r.setAttribute("data-front-toast","true"),this._toasts.length-t<=n+1&&r.removeAttribute("data-toast-state")}}_moveToastsDown(o){let n=e._config?.maxVisibleToasts??E;for(let t=0;t<this._toasts.length;++t){let i=this._toasts[t],r=document.getElementById(i._id);if(!r)throw new Error("[ToastMyNuts] Could not find toast with ID "+i._id);let c=o;for(let s=t+1;s<this._toasts.length;++s){let l=this._toasts[s],d=document.getElementById(l._id);if(!d)throw new Error("[ToastMyNuts] Could not find toast with ID "+l._id);let a=parseFloat(d.style.getPropertyValue("--_initial-height"));c+=a}r.style.setProperty("--_height-offset",`${c}px`),r.style.setProperty("--_idx",(this._toasts.length-t).toString()),r.removeAttribute("data-front-toast"),this._toasts.length-t>=n&&r.setAttribute("data-toast-state","hidden")}}_getOrCreateToastContainer(){let o=document.getElementById(g);if(!o){let n=document.createElement("div");n.id=y,n.setAttribute("aria-label","Notifications (Alt + T)");let t=document.createElement("ol");return t.id=g,t.setAttribute("data-position-x",e._config?.position?.x||T.x),t.setAttribute("data-position-y",e._config?.position?.y||T.y),t.setAttribute("data-expanded","false"),e._toastContainerMouseEnterListener=()=>{t.setAttribute("data-expanded","true")},e._toastContainerMouseLeaveListener=()=>{t.setAttribute("data-expanded","false")},e._toastContainerKeyDownListener=i=>{if(i.altKey&&i.code==="KeyT"){if(t.getAttribute("data-did-toggle-expansion")==="true")return;t.setAttribute("data-expanded",t.getAttribute("data-expanded")==="true"?"false":"true"),t.setAttribute("data-did-toggle-expansion","true")}},e._toastContainerKeyUpListener=i=>{i.code==="KeyT"&&t.setAttribute("data-did-toggle-expansion","false")},t.addEventListener("pointerenter",e._toastContainerMouseEnterListener),t.addEventListener("pointerleave",e._toastContainerMouseLeaveListener),window.addEventListener("keydown",e._toastContainerKeyDownListener),window.addEventListener("keyup",e._toastContainerKeyUpListener),n.appendChild(t),document.body.appendChild(n),t}if(!(o instanceof HTMLOListElement))throw new Error("[ToastMyNuts] Colliding ID "+g+".");return o}_createMessageElement(o){let n=document.createElement("div");return n.textContent=o,n.classList.add(w),n}_createToastElement(o,n){let t=document.createElement("li");return t.id=o,t.classList.add(C),t.style.setProperty("--_idx","0"),t.style.setProperty("--_z-idx",this._toasts.length.toString()),t.setAttribute("data-toast-type",n),t.setAttribute("data-toast-state","entering"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("data-front-toast","true"),t}_createCloseBtn(o){let n=new AbortController,t=document.createElement("button");return t.type="button",t.setAttribute("aria-label","Close notification"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z" /></svg>',t.classList.add(A),t.addEventListener("click",()=>{if(e._config&&e._config.ignoreErrors)try{this.removeToast(o)}catch{}else this.removeToast(o)},{signal:n.signal}),[t,n]}};function v(){let e=document.querySelector('meta[name="toastmynuts:config"]');if(!e)return;let o=e.getAttribute("content");if(o)return JSON.parse(o)}var _=v(),f=m.getInstance(_);function x(e,o){if(_&&_.ignoreErrors)try{f.addToast(e,o)}catch(n){console.error(n)}else f.addToast(e,o)}function b(e){if(_&&_.ignoreErrors)try{f.removeToast(e)}catch{}else f.removeToast(e)}window.ToastMyNuts=Object.freeze({create:x,remove:b});})();
//# sourceMappingURL=index.umd.js.map
